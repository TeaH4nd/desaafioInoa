{% extends 'base.html' %} {% block content %}

<h1>Perfil</h1>
<br />
<h5>Email</h5>
<div class="row align-items-start">
	<div class="col-4">
		<form
			action="{% url 'perfil' %}"
			class="row row-cols-lg-auto g-3 align-items-center"
			method="POST"
		>
			{% csrf_token %}
			<div class="col-12">
				<div class="input-group">
					<input
						class="form-control mr-sm-2"
						type="search"
						placeholder="Digite seu Email"
						aria-label="Search"
						name="email"
					/>
				</div>
			</div>
			<div class="col-12">
				<button class="btn btn-outline-success" type="submit">
					Adicionar
				</button>
			</div>
		</form>
	</div>
	<div class="col-4">
		<table class="table table-striped table-bordered table-hover">
			<thead class="table-dark">
				<tr>
					<th scope="col">Email</th>
				</tr>
			</thead>
			<tbody>
                {% if lista %}
				{% load humanize %} {% for item in lista %}
				<tr>
					<td scope="row">{{ item }}</td>
				</tr>

				{% endfor %}
                {% else %}

				<tr>
					<td scope="row">Nenhum email cadastrado</td>
				</tr>

				{% endif %}
			</tbody>
		</table>
	</div>
</div>
<br/>
<h5>Limites</h5>

<div class="row align-items-start">
	<div class="col-4">
		<form
			action="{% url 'perfil' %}"
			class="row row-cols-lg-auto g-3 align-items-center"
			method="POST"
		>
			{% csrf_token %}
			<div class="col-12">
				<div class="input-group">
					<input
						class="form-control mr-sm-2"
						type="search"
						placeholder="Digite o limite inferior"
						aria-label="Search"
						name="limInf"
                    />
                    <input
                    class="form-control mr-sm-2"
                    type="search"
                    placeholder="Digite o limite superior"
                    aria-label="Search"
                    name="limSup"
                />
				</div>
			</div>
			<div class="col-12">
				<button class="btn btn-outline-success" type="submit">
					Adicionar
				</button>
			</div>
		</form>
	</div>
	<div class="col-4">
		<table class="table table-striped table-bordered table-hover">
			<thead class="table-dark">
				<tr>
                    <th scope="col">Limite Inferior</th>
                    <th scope="col">Limite Superior</th>
				</tr>
			</thead>
			<tbody>
                {% if limite %}
				{% load humanize %} 
                <tr>
                    <td scope="row">{{limite.limInf}}</td>
                    <td scope="row">{{limite.limSup}}</td>
                </tr>

                {% else %}
				<tr>
					<td scope="row">LimInf</td>
					<td scope="row">LimSup</td>
				</tr>
                {% endif %}
			</tbody>
		</table>
	</div>
</div>
<br/>
<h5>Script</h5>

<div class="row align-items-center">
	<div class="col-12">
		<form
			action="{% url 'start' %}"
			class="row row-cols-lg-auto g-3 align-items-center"
			method="POST"
		>
			{% csrf_token %}
			<div class="col-3">
				<div class="input-group">
					<input
						class="form-control mr-sm-4"
						type="search"
						placeholder="Digite o periodo de repetição"
						aria-label="Search"
						name="numero"
					/>
				</div>
			</div>
			<div class="col-3">
				<select class="form-select" id="inlineFormSelectPref" name="tempo">
					<option selected value="1">Segundo(s)</option>
					<option value="2">Minuto(s)</option>
					<option value="3">Hora(s)</option>
				</select>
			</div>
			<div class="col-3">
				<button class="btn btn-outline-success" type="submit">
					Adicionar
				</button>
            </div>
            <div class="col-3">
            <a href="{% url 'stop' %}" type="button" class="btn btn-danger"
	        >Parar</a>
            </div>
        </form>
        <br/>
        {% if task %}
            <p class="h5">Suas ações estao sendo salvas a cada {{ task.numero }} {{ task.tempo }}</p>
        {% else %}
            <p class="h5">Não estou atualizando o preço das ações</p>
        {% endif %}
	</div>
</div>
{% endblock %}
